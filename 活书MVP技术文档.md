# KAIROS活书MVP技术需求文档

## 项目代号：谋攻体验器 v1.0

## 📋 **项目概述**

**产品名称**：KAIROS活书MVP - 孙子兵法·谋攻篇体验器 **项目目标**：验证"沉浸式经历学习"模式的用户接受度和学习效果 **核心假设**：用户更喜欢通过"经历古人/商业领袖的决策过程"来学习智慧，而非单纯阅读理论 **开发周期**：4周 **团队规模**：1-2名开发者

## 🎯 **核心功能模块**

### **模块1：基础阅读系统**（Week 1）

```YAML
功能描述: 提供《孙子兵法·谋攻篇》的多时长阅读版本
技术要求:
  - 静态内容管理系统
  - 响应式文本显示
  - 阅读进度跟踪
  - 简单的内容切换逻辑

子功能:
  - 3分钟速读版: 600-800字核心观点
  - 30分钟标准版: 3000-4000字完整解析
  - 2小时深度版: 分成6个20分钟章节，可暂停继续

技术实现:
  - 前端: React/Vue组件化内容展示
  - 后端: 静态JSON内容配置
  - 存储: LocalStorage记录阅读进度
```

### **模块2：沉浸式场景体验引擎**（Week 2-3）

```YAML
功能描述: 核心MVP功能，提供"穿越式决策体验"
技术要求:
  - 场景渲染引擎
  - AI对话系统集成
  - 决策选择收集
  - 多轮对话状态管理

子功能详述:
场景设置子系统:
  输入: 场景ID
  输出: 完整的情境描述（背景、角色、资源、约束）
  数据结构: 
    scene_id: string
    background: string (1000字背景描述)
    role: string (用户扮演的角色)
    resources: array (可用资源列表)
    constraints: array (限制条件列表)
    stakeholders: array (利益相关者)

AI谋士对话子系统:
  角色配置:
    - 鹰派谋士: 主张直接行动，强调机会和速度
    - 鸽派谋士: 建议智取，强调风险控制
    - 现实主义谋士: 分析资源和可行性
    - 魔鬼代言人: 质疑用户假设，提出反面观点
  
  对话逻辑:
    - 每个谋士最多发言3轮
    - 基于用户回应动态调整观点
    - 维护角色一致性
    - 引导用户做出最终决策

决策收集子系统:
  收集内容:
    - 用户最终选择
    - 决策理由（文字输入）
    - 对话过程记录
    - 思考时间统计
```

### **模块3：对比复盘系统**（Week 3）

```YAML
功能描述: 展示历史真实决策，生成思维对比分析
技术要求:
  - 结果展示引擎
  - 数据对比算法
  - 报告生成系统

子功能:
历史决策展示:
  - 展示历史人物的实际选择
  - 解释决策背后的思维逻辑
  - 展示决策的实际结果

思维对比分析:
  输入: 用户决策过程 + 历史人物决策过程
  输出: 结构化对比报告
  对比维度:
    - 信息收集完整度
    - 风险评估准确性
    - 资源配置合理性
    - 长短期考量平衡
    - 利益相关者分析

简版学习报告:
  格式: 3页PDF或网页报告
  内容结构:
    - 第1页: 决策对比总览
    - 第2页: 思维优势与盲点
    - 第3页: 应用建议和下一步
```

### **模块4：个人场景应用**（Week 4）

```YAML
功能描述: 将学到的原则应用到用户个人情境
技术要求:
  - 场景输入界面
  - 智能建议生成
  - 简单的举一反三练习

实现方式:
  - 用户输入个人面临的决策情境
  - AI基于谋攻原则提供分析框架
  - 生成3-5条具体应用建议
  - 不做复杂的个性化，只做简单的情境适配
```

## 🏗️ **技术架构设计**

### **整体架构**

```Plain
前端 (React/Vue)
├── 场景展示组件
├── 对话界面组件  
├── 决策收集组件
└── 报告展示组件

后端 (Node.js/Python)
├── 内容管理模块
├── AI对话接口
├── 决策分析引擎
└── 报告生成服务

AI服务层
├── KAIROS三重人格系统
├── 场景适配逻辑
└── 对话状态管理

数据层
├── 场景内容库 (JSON)
├── 用户会话数据 (临时)
└── 统计数据 (可选)
```

### **技术栈建议**

```YAML
前端: 
  - React 18 + TypeScript
  - Tailwind CSS (样式)
  - React Router (路由)
  - Zustand (状态管理)

后端:
  - Node.js + Express
  - 或者 Python + FastAPI

AI集成:
  - 直接调用现有KAIROS系统API
  - 或集成OpenAI API作为后备

数据存储:
  - 场景数据: JSON文件或简单数据库
  - 会话数据: Redis (临时存储)
  - 用户数据: 暂不需要永久存储

部署:
  - 前端: Vercel/Netlify
  - 后端: Railway/Render
  - 数据库: Upstash Redis (如需要)
```

## 📊 **数据结构设计**

### **场景配置数据结构**

```JSON
{
  "scene_id": "bezos_2000_crisis",
  "title": "贝索斯2000年生死抉择",
  "category": "modern_business",
  "estimated_time": 45,
  "background": {
    "time_location": "2000年，互联网泡沫破灭初期",
    "situation": "亚马逊股价暴跌80%，现金流紧张",
    "role": "杰夫·贝索斯，亚马逊CEO",
    "pressure_points": [
      "投资者要求立即盈利",
      "员工士气低落", 
      "媒体唱衰"
    ]
  },
  "resources": [
    "现有业务现金流",
    "技术团队",
    "客户基础"
  ],
  "constraints": [
    "6个月现金储备",
    "董事会压力",
    "市场信心缺失"
  ],
  "decision_points": [
    {
      "question": "面对董事会压力，你如何抉择？",
      "options": [
        "短期生存模式：削减投资，立即盈利",
        "长期信念模式：坚持投资，写信给股东"
      ]
    }
  ],
  "advisors": {
    "hawk": {
      "name": "进攻派谋士",
      "personality": "强调抓住机会，快速行动",
      "key_arguments": ["现在是建立优势的最佳时机", "竞争对手也在困难中"]
    },
    "dove": {
      "name": "谨慎派谋士", 
      "personality": "强调风险控制，稳健发展",
      "key_arguments": ["现金为王，生存第一", "投资者信任最重要"]
    }
  },
  "historical_outcome": {
    "actual_decision": "选择长期主义，写著名股东信",
    "reasoning": "贝索斯的核心思维逻辑...",
    "results": "后续发展结果..."
  }
}
```

### **用户会话数据结构**

```JSON
{
  "session_id": "uuid",
  "user_id": "anonymous_xxx", 
  "scene_id": "bezos_2000_crisis",
  "start_time": "2024-01-01T10:00:00Z",
  "dialog_history": [
    {
      "speaker": "hawk_advisor",
      "message": "现在正是建立优势的时机...",
      "timestamp": "2024-01-01T10:05:00Z"
    },
    {
      "speaker": "user",
      "message": "但是现金流是个问题...",
      "timestamp": "2024-01-01T10:06:00Z"
    }
  ],
  "final_decision": {
    "choice": "long_term_approach",
    "reasoning": "用户输入的决策理由",
    "confidence_level": 7
  },
  "comparison_report": {
    "user_score": {
      "information_gathering": 8,
      "risk_assessment": 6,
      "stakeholder_analysis": 7
    },
    "insights": ["用户擅长信息收集", "需要加强风险评估"]
  }
}
```

## 🔌 **API接口设计**

### **内容相关接口**

```JavaScript
// 获取场景列表
GET /api/scenes
Response: {
  scenes: [
    {
      scene_id: "string",
      title: "string", 
      category: "string",
      estimated_time: number,
      difficulty: "beginner|intermediate|advanced"
    }
  ]
}

// 获取场景详情
GET /api/scenes/:scene_id
Response: {
  // 完整场景配置数据结构
}

// 获取阅读内容
GET /api/content/:type  // type: quick|standard|deep
Response: {
  content: "string",
  estimated_reading_time: number,
  key_concepts: ["string"]
}
```

### **体验相关接口**

```JavaScript
// 开始场景体验
POST /api/experience/start
Body: {
  scene_id: "string",
  user_profile?: {
    industry?: "string",
    role?: "string"
  }
}
Response: {
  session_id: "string",
  initial_scenario: "object"
}

// AI对话接口
POST /api/experience/chat
Body: {
  session_id: "string",
  message: "string",
  advisor_type?: "hawk|dove|realist|devil_advocate"
}
Response: {
  advisor_response: "string",
  suggested_questions: ["string"],
  decision_ready: boolean
}

// 提交决策
POST /api/experience/decide
Body: {
  session_id: "string",
  decision: "string",
  reasoning: "string",
  confidence: number
}
Response: {
  comparison_report: "object",
  learning_insights: ["string"],
  next_steps: ["string"]
}
```

## 🎨 **前端界面规范**

### **整体设计风格**

```YAML
视觉风格: 
  - 简洁现代，专业感
  - 沉浸式背景（古典书籍质感）
  - 渐进式引导设计

色彩方案:
  - 主色：深蓝 #1a365d (权威感)
  - 辅色：金黄 #f6ad55 (智慧感) 
  - 背景：米白 #faf8f6 (阅读友好)
  - 文字：深灰 #2d3748

字体:
  - 中文：思源宋体/苹方 (易读性)
  - 英文：Inter/Source Sans Pro
  - 代码：Source Code Pro
```

### **关键页面设计要求**

1. **首页**

```YAML
布局:
  - 顶部：产品标题 + 简短说明
  - 中部：3个时长选项卡片
  - 底部：开始体验按钮

交互:
  - 悬停效果显示时长详情
  - 选择后高亮显示
  - 平滑的过渡动画
```

1. **场景选择页**

```YAML
布局:
  - 左侧：场景列表（历史场景 + 现代商业场景）
  - 右侧：选中场景的详细描述
  - 底部：确认开始按钮

功能:
  - 场景预览（背景图 + 简介）
  - 预计完成时间显示
  - 难度等级标识
```

1. **沉浸式体验页**

```YAML
布局:
  - 顶部：场景背景描述区域
  - 左侧：角色信息面板（你的身份、资源、约束）
  - 中部：对话区域
  - 右侧：谋士角色切换面板
  - 底部：用户输入框

交互特点:
  - 打字机效果显示AI回应
  - 谋士头像切换动画
  - 关键信息高亮显示
  - 决策时刻的特殊UI提示
```

1. **对比复盘页**

```YAML
布局:
  - 上部：你的决策 vs 历史决策（左右对比）
  - 中部：思维过程分析（雷达图或条形图）
  - 下部：学习洞察和应用建议

视觉元素:
  - 数据可视化图表
  - 优势/盲点标识
  - 进步建议卡片
```

## ⚡ **性能和体验要求**

### **性能指标**

```YAML
页面加载时间: < 2秒
AI回应延迟: < 3秒  
交互反应时间: < 500ms
移动端适配: 完全响应式
浏览器兼容: Chrome 90+, Safari 14+, Firefox 88+
```

### **用户体验要求**

```YAML
学习曲线: 新用户5分钟内能完成第一次完整体验
错误处理: 网络错误、AI超时等优雅降级
进度保存: 体验过程可暂停和恢复
引导帮助: 关键步骤有操作提示
```

## 📅 **开发里程碑**

### **Week 1: 基础框架**

```YAML
目标: 完成基础阅读功能和项目架构搭建
交付物:
  ✅ 项目初始化和技术栈搭建
  ✅ 基础阅读系统（3个时长版本）
  ✅ 简单的内容管理后台
  ✅ 响应式前端页面框架

验收标准:
  - 用户能够选择不同时长阅读
  - 阅读进度能够保存和恢复
  - 基础UI组件可以复用
```

### **Week 2: 核心体验引擎**

```YAML
目标: 完成沉浸式场景体验的核心功能
交付物:
  ✅ 场景配置系统（至少2个场景）
  ✅ AI对话接口集成
  ✅ 多角色谋士对话逻辑
  ✅ 用户决策收集功能

验收标准:
  - 用户能够与4个不同角色的AI谋士对话
  - 对话逻辑连贯，角色性格鲜明
  - 用户决策能够准确收集和记录
```

### **Week 3: 对比分析系统**

```YAML
目标: 完成决策对比和学习报告生成
交付物:
  ✅ 历史决策数据库
  ✅ 思维对比分析算法
  ✅ 学习报告生成器
  ✅ 可视化图表展示

验收标准:
  - 能够准确对比用户决策与历史决策
  - 生成有价值的学习洞察
  - 报告内容清晰易懂
```

### **Week 4: 完善和测试**

```YAML
目标: 系统集成测试和用户体验优化
交付物:
  ✅ 个人场景应用功能
  ✅ 全流程测试和bug修复
  ✅ 性能优化和用户体验改进
  ✅ 产品演示准备

验收标准:
  - 10位内测用户完成完整体验
  - 平均完成时间在45分钟内
  - 用户满意度≥4.5/5分
```

## 🧪 **测试和验收标准**

### **功能测试**

```YAML
基础功能测试:
  ✅ 每个阅读时长版本都能正常显示
  ✅ 场景加载和切换无错误
  ✅ AI对话响应正常且角色一致
  ✅ 决策收集和数据保存正确
  ✅ 对比报告生成准确完整

边界情况测试:
  ✅ 网络断开时的错误处理
  ✅ AI回应超时的降级方案
  ✅ 用户输入异常内容的处理
  ✅ 浏览器刷新后的状态恢复
```

### **用户体验测试**

```YAML
可用性测试:
  - 新用户能够无指导完成第一次体验
  - 关键操作步骤直观明确
  - 错误信息提示友好有用

性能测试:
  - 页面加载速度符合要求
  - AI回应延迟在可接受范围
  - 移动端体验流畅无卡顿

内容质量测试:
  - 场景描述足够沉浸
  - AI谋士角色性格鲜明
  - 学习洞察有价值有深度
```

### **最终验收标准**

```YAML
核心指标:
  ✅ 用户完成率 ≥ 80%
  ✅ 平均体验时长 30-50分钟
  ✅ 用户满意度 ≥ 4.5/5
  ✅ 技术稳定性 ≥ 99%

业务指标:
  ✅ 用户表示更理解孙子兵法概念
  ✅ 用户认为这种学习方式有价值
  ✅ 用户愿意推荐给其他人
  ✅ 用户希望体验更多类似内容
```

## 💰 **成本和资源估算**

### **开发成本**

```YAML
开发人员: 1-2人 × 4周 = 8-16人周
技术栈成本: 基本免费（开源工具）
AI服务成本: $50-200/月（开发测试期）
云服务成本: $20-50/月（轻量级部署）
总预算估算: $500-1000（4周开发期）
```

### **后续运营成本**

```YAML
服务器成本: $50-100/月
AI调用成本: $100-500/月（取决于用户量）
内容制作成本: $1000-3000/月（新场景开发）
用户支持成本: $200-500/月
```

## 🔧 **技术实施注意事项**

### **开发优先级**

1. **优先做好一个场景**：与其做5个平庸场景，不如做1个精彩场景
2. **AI对话是核心**：这是产品的灵魂，必须做到位
3. **移动端友好**：很多用户会在手机上使用
4. **快速反馈循环**：每天都要看到进展，每周都要有可用版本

### **技术风险控制**

```YAML
风险1: AI回应质量不稳定
解决方案: 预设高质量回应模板，AI生成+人工调优

风险2: 前端交互复杂度过高
解决方案: 采用成熟UI框架，优先实现功能后优化体验

风险3: 场景内容制作周期长
解决方案: 第一版用简单文字，后续版本再优化呈现效果

风险4: 用户数据丢失
解决方案: 多层级数据备份，关键节点自动保存
```

### **扩展性考虑**

虽然是MVP，但要为后续扩展留好接口：

- 场景配置系统要支持快速添加新内容
- AI对话系统要支持新的谋士角色
- 数据结构要支持更复杂的分析维度
- 前端组件要支持不同类型的内容展示

## 📝 **总结**

这个技术需求文档的核心原则是：**简单、聚焦、可验证**。

我们不追求功能的完美，而追求核心价值的清晰体现。如果用户喜欢这种"经历式学习"的方式，我们就成功了。然后，我们再基于用户反馈来迭代和改进。

**请技术团队严格按照这个需求文档执行，任何超出这个范围的功能都放到v2.0版本考虑。**

*文档版本：v1.0* *创建时间：2024-01-01* *负责人：产品经理*
