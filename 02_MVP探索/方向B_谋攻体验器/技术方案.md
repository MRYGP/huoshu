# 方向B：谋攻体验器 - 技术方案

> **项目代号**：谋攻体验器 v1.0  
> **开发周期**：4周  
> **团队规模**：1-2名开发者  
> **来源**：`活书MVP技术文档.md`

---

## 项目概述

**产品名称**：KAIROS活书MVP - 孙子兵法·谋攻篇体验器

**项目目标**：验证"沉浸式经历学习"模式的用户接受度和学习效果

**核心假设**：用户更喜欢通过"经历古人/商业领袖的决策过程"来学习智慧，而非单纯阅读理论

---

## 核心功能模块

### 模块1：基础阅读系统（Week 1）

**功能描述**：提供《孙子兵法·谋攻篇》的多时长阅读版本

**技术要求**：
- 静态内容管理系统
- 响应式文本显示
- 阅读进度跟踪
- 简单的内容切换逻辑

**子功能**：
- 3分钟速读版：600-800字核心观点
- 30分钟标准版：3000-4000字完整解析
- 2小时深度版：分成6个20分钟章节，可暂停继续

**技术实现**：
- 前端：React/Vue组件化内容展示
- 后端：静态JSON内容配置
- 存储：LocalStorage记录阅读进度

---

### 模块2：沉浸式场景体验引擎（Week 2-3）

**功能描述**：核心MVP功能，提供"穿越式决策体验"

**技术要求**：
- 场景渲染引擎
- AI对话系统集成
- 决策选择收集
- 多轮对话状态管理

**子功能详述**：

#### 场景设置子系统
- **输入**：场景ID
- **输出**：完整的情境描述（背景、角色、资源、约束）
- **数据结构**：
  ```json
  {
    "scene_id": "string",
    "background": "string (1000字背景描述)",
    "role": "string (用户扮演的角色)",
    "resources": ["array (可用资源列表)"],
    "constraints": ["array (限制条件列表)"],
    "stakeholders": ["array (利益相关者)"]
  }
  ```

#### AI谋士对话子系统
**角色配置**：
- 鹰派谋士：主张直接行动，强调机会和速度
- 鸽派谋士：建议智取，强调风险控制
- 现实主义谋士：分析资源和可行性
- 魔鬼代言人：质疑用户假设，提出反面观点

**对话逻辑**：
- 每个谋士最多发言3轮
- 基于用户回应动态调整观点
- 维护角色一致性
- 引导用户做出最终决策

#### 决策收集子系统
**收集内容**：
- 用户最终选择
- 决策理由（文字输入）
- 对话过程记录
- 思考时间统计

---

### 模块3：对比复盘系统（Week 3）

**功能描述**：展示历史真实决策，生成思维对比分析

**技术要求**：
- 结果展示引擎
- 数据对比算法
- 报告生成系统

**子功能**：

#### 历史决策展示
- 展示历史人物的实际选择
- 解释决策背后的思维逻辑
- 展示决策的实际结果

#### 思维对比分析
- **输入**：用户决策过程 + 历史人物决策过程
- **输出**：结构化对比报告
- **对比维度**：
  - 信息收集完整度
  - 风险评估准确性
  - 资源配置合理性
  - 长短期考量平衡
  - 利益相关者分析

#### 简版学习报告
- **格式**：3页PDF或网页报告
- **内容结构**：
  - 第1页：决策对比总览
  - 第2页：思维优势与盲点
  - 第3页：应用建议和下一步

---

### 模块4：个人场景应用（Week 4）

**功能描述**：将学到的原则应用到用户个人情境

**技术要求**：
- 场景输入界面
- 智能建议生成
- 简单的举一反三练习

**实现方式**：
- 用户输入个人面临的决策情境
- AI基于谋攻原则提供分析框架
- 生成3-5条具体应用建议
- 不做复杂的个性化，只做简单的情境适配

---

## 技术架构设计

### 整体架构

```
前端 (React/Vue)
├── 场景展示组件
├── 对话界面组件  
├── 决策收集组件
└── 报告展示组件

后端 (Node.js/Python)
├── 内容管理模块
├── AI对话接口
├── 决策分析引擎
└── 报告生成服务

AI服务层
├── KAIROS三重人格系统
├── 场景适配逻辑
└── 对话状态管理

数据层
├── 场景内容库 (JSON)
├── 用户会话数据 (临时)
└── 统计数据 (可选)
```

---

## 技术栈选型

### 前端
- **框架**：React 或 Vue 3
- **UI库**：Ant Design 或 Element Plus
- **状态管理**：Redux/Zustand 或 Pinia
- **路由**：React Router 或 Vue Router

### 后端
- **语言**：Python (FastAPI) 或 Node.js (Express)
- **AI接口**：OpenAI API 或 Claude API
- **数据库**：PostgreSQL (可选，MVP阶段可用JSON文件)

### AI服务
- **大模型**：GPT-4 或 Claude 3.5
- **提示工程**：使用KAIROS三重人格系统（Jobs、Grove、Socrates）
- **对话管理**：维护多轮对话上下文

---

## 开发里程碑

### Week 1：基础阅读系统
- [ ] 搭建前端框架
- [ ] 实现多时长版本切换
- [ ] 阅读进度跟踪
- [ ] 基础UI设计

### Week 2-3：沉浸式场景体验
- [ ] 场景数据结构和内容准备
- [ ] AI对话接口集成
- [ ] 多角色对话系统
- [ ] 决策收集功能

### Week 3：对比复盘系统
- [ ] 历史决策数据准备
- [ ] 对比分析算法
- [ ] 报告生成功能
- [ ] 报告展示界面

### Week 4：个人场景应用
- [ ] 场景输入界面
- [ ] AI建议生成
- [ ] 测试和优化
- [ ] 部署上线

---

## 技术难点与解决方案

### 难点1：AI角色一致性
**问题**：如何让AI在不同对话中保持角色一致性？

**解决方案**：
- 为每个角色设计详细的System Prompt
- 维护角色特征库（性格、说话风格、价值观）
- 在每次对话前注入角色上下文

### 难点2：多轮对话状态管理
**问题**：如何管理复杂的多轮对话流程？

**解决方案**：
- 使用状态机管理对话流程
- 维护对话历史上下文
- 设计清晰的对话节点和跳转逻辑

### 难点3：决策对比分析
**问题**：如何客观对比用户决策和历史决策？

**解决方案**：
- 设计结构化的决策分析框架
- 使用AI进行多维度分析
- 生成可视化的对比报告

---

## 参考文档

- 完整技术文档：`活书MVP技术文档.md`
- 产品方案：`02_MVP探索/方向B_谋攻体验器/产品方案.md`
- 系统架构：`03_技术设计/系统架构.md`

